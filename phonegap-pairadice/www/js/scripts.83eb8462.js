(function(){"use strict";angular.module("pairadiceApp",["ngAnimate","ngCookies","ngSanitize","ngTouch","ui.router","satellizer"]).config(["$stateProvider","$urlRouterProvider","$authProvider",function(a,b,c){return c.facebook({clientId:"00000"}),c.google({clientId:"00000"}),c.twitter({url:"/auth/twitter"}),a.state("index",{url:"",templateUrl:"views/main.html",controller:"MainCtrl"}).state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("settings",{url:"/settings",templateUrl:"views/settings.html",controller:"SettingsCtrl"}).state("highscores",{url:"/highscores",templateUrl:"views/highscores.html",controller:"HighscoresCtrl"}).state("game",{url:"/play",templateUrl:"views/game.html",controller:"GameCtrl",resolve:{game:["GameMaster",function(a){return a.init()}]}}),b.otherwise("")}])}).call(this),function(){"use strict";angular.module("pairadiceApp").service("GameMaster",["$q",function(){var a,b,c,d,e,f,g;return e=[],d=[],g=[],b=function(){var a,b,c;for(a={num:null,pair:null},b=c=1;5>=c;b=++c)a.num=b,e.push(_.clone(a));return e},a=function(){var a,b,c;for(a={num:null,notches:[!1,!1,!1,!1,!1,!1,!1,!1]},b=c=1;3>=c;b=++c)d.push($.extend(!0,{},a));return d},c=function(){var a,b,c;for(b={num:null,points:null,notches:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]},a=c=2;12>=c;a=++c){switch(b.num=a,b.num){case 2:case 12:b.points=1e3;break;case 3:case 11:b.points=500;break;case 4:case 10:b.points=350;break;case 5:case 9:b.points=250;break;case 6:case 8:b.points=200;break;default:b.points=150}g.push($.extend(!0,{},b))}return g},f=function(){return b(),a(),c(),{gameDice:e,deathBoard:d,scoreBoard:g}},{init:f}}])}.call(this),function(){"use strict";angular.module("pairadiceApp").controller("MainCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";angular.module("pairadiceApp").controller("GameCtrl",["$scope","game",function(a,b){return a.gameDice=b.gameDice,a.deathBoard=b.deathBoard,a.scoreBoard=b.scoreBoard,a.rounds=0,a.score=0,a.gameStarted=!1,a.roundFinished=!1,a.gameFinished=!1,a.pairTotals={p1:0,p2:0},a.startGame=function(){var b,c,d,e,f,g,h,i;for(a.gameFinished=!1,a.score=0,a.rounds=0,h=a.deathBoard,d=0,f=h.length;f>d;d++)b=h[d],b.num=null,b.notches=[!1,!1,!1,!1,!1,!1,!1,!1];for(i=a.scoreBoard,e=0,g=i.length;g>e;e++)c=i[e],c.notches=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];return a.initRound(),a.gameStarted=!0},a.pairDice=function(b){var c;if(a.gameStarted)return b.pair?(a.pairTotals[b.pair]-=b.num,b.pair=null,a.roundFinished=!1):(c=_.countBy(a.gameDice,function(a){return a.pair}),!c.p1||c.p1<2?(b.pair="p1",a.pairTotals.p1+=b.num):(!c.p2||c.p2<2)&&(b.pair="p2",a.pairTotals.p2+=b.num),a.roundFinished=c.p1+c.p2===3)},a.updateScoreBoard=function(){var b,c,d,e,f,g,h,i,j;for(i=a.scoreBoard,e=0,g=i.length;g>e;e++)d=i[e],(d.num===a.pairTotals.p1||d.num===a.pairTotals.p2)&&(b=_.indexOf(d.notches,!1),d.notches[b]=!0,a.pairTotals.p1===a.pairTotals.p2&&(d.notches[++b]=!0));for(c=0,j=a.scoreBoard,f=0,h=j.length;h>f;f++)d=j[f],b=_.indexOf(d.notches,!1),-1===b&&(c+=5*d.points),b>0&&5>b?c-=200:b>5&&(c+=(b-5)*d.points);return a.score=c},a.updateDeathBoard=function(){var b,c,d,e;return c=_.findWhere(a.gameDice,{pair:null}),d=_.findWhere(a.deathBoard,{num:null}),(b=_.findWhere(a.deathBoard,{num:c.num}))?(e=_.indexOf(b.notches,!1),b.notches[e]=!0,7===e):(d&&(d.num=c.num,d.notches[0]=!0),!1)},a.initRound=function(){var b,c,d,e,f,g,h,i;for(a.rounds++,a.roundFinished=!1,a.pairTotals.p1=0,a.pairTotals.p2=0,g=a.gameDice,c=0,e=g.length;e>c;c++)b=g[c],b.pair=null;for(h=a.gameDice,i=[],d=0,f=h.length;f>d;d++)b=h[d],i.push(b.num=_.random(1,6));return i},a.finalizeRound=function(){var b,c,d,e,f,g;if(a.roundFinished&&(c=_.findWhere(a.gameDice,{pair:null}),b=_.pluck(a.deathBoard,"num"),e=_.pluck(a.gameDice,"num"),f=_.contains(b,c.num),g=0===_.intersection(b,e).length,d=f||g))return a.updateScoreBoard(),a.gameFinished=a.updateDeathBoard(),a.gameFinished?console.log("Game over"):a.initRound()},a.notchSize=function(a,b,c){var d;if(a||b)return 4>b?(d="notch-single",c&&(d+=" sm-active")):4===b?(d="notch-0",c&&(d+=" z-active")):(d="notch-"+a,c&&(d+=" lg-active")),d},a.trackNotch=function(a,b){return""+a+b}}])}.call(this),function(){"use strict";angular.module("pairadiceApp").controller("HighscoresCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";angular.module("pairadiceApp").controller("SettingsCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";angular.module("pairadiceApp").controller("LoginCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";angular.module("pairadiceApp").directive("deathrow",function(){return{restrict:"E",templateUrl:"views/templates/deathrow.html",scope:{dice:"="}}})}.call(this),function(a,b){"object"==typeof exports?module.exports=b(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],b):a.Ladda=b(a.Spinner)}(this,function(a){"use strict";function b(a){if(void 0===a)return void console.warn("Ladda button target must be defined.");a.querySelector(".ladda-label")||(a.innerHTML='<span class="ladda-label">'+a.innerHTML+"</span>");var b,c=document.createElement("span");c.className="ladda-spinner",a.appendChild(c);var d,e={start:function(){return b||(b=g(a)),a.setAttribute("disabled",""),a.setAttribute("data-loading",""),clearTimeout(d),b.spin(c),this.setProgress(0),this},startAfter:function(a){return clearTimeout(d),d=setTimeout(function(){e.start()},a),this},stop:function(){return a.removeAttribute("disabled"),a.removeAttribute("data-loading"),clearTimeout(d),b&&(d=setTimeout(function(){b.stop()},1e3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(b){b=Math.max(Math.min(b,1),0);var c=a.querySelector(".ladda-progress");0===b&&c&&c.parentNode?c.parentNode.removeChild(c):(c||(c=document.createElement("div"),c.className="ladda-progress",a.appendChild(c)),c.style.width=(b||0)*a.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),a.setAttribute("disabled",""),this},isLoading:function(){return a.hasAttribute("data-loading")},remove:function(){clearTimeout(d),a.removeAttribute("disabled",""),a.removeAttribute("data-loading",""),b&&(b.stop(),b=null);for(var c=0,f=i.length;f>c;c++)if(e===i[c]){i.splice(c,1);break}}};return i.push(e),e}function c(a,b){for(;a.parentNode&&a.tagName!==b;)a=a.parentNode;return b===a.tagName?a:void 0}function d(a){for(var b=["input","textarea"],c=[],d=0;b.length>d;d++)for(var e=a.getElementsByTagName(b[d]),f=0;e.length>f;f++)e[f].hasAttribute("required")&&c.push(e[f]);return c}function e(a,e){e=e||{};var f=[];"string"==typeof a?f=h(document.querySelectorAll(a)):"object"==typeof a&&"string"==typeof a.nodeName&&(f=[a]);for(var g=0,i=f.length;i>g;g++)(function(){var a=f[g];if("function"==typeof a.addEventListener){var h=b(a),i=-1;a.addEventListener("click",function(){var b=!0,f=c(a,"FORM");if(void 0!==f)for(var g=d(f),j=0;g.length>j;j++)""===g[j].value.replace(/^\s+|\s+$/g,"")&&(b=!1);b&&(h.startAfter(1),"number"==typeof e.timeout&&(clearTimeout(i),i=setTimeout(h.stop,e.timeout)),"function"==typeof e.callback&&e.callback.apply(null,[h]))},!1)}})()}function f(){for(var a=0,b=i.length;b>a;a++)i[a].stop()}function g(b){var c,d=b.offsetHeight;0===d&&(d=parseFloat(window.getComputedStyle(b).height)),d>32&&(d*=.8),b.hasAttribute("data-spinner-size")&&(d=parseInt(b.getAttribute("data-spinner-size"),10)),b.hasAttribute("data-spinner-color")&&(c=b.getAttribute("data-spinner-color"));var e=12,f=.2*d,g=.6*f,h=7>f?2:3;return new a({color:c||"#fff",lines:e,radius:f,length:g,width:h,zIndex:"auto",top:"auto",left:"auto",className:""})}function h(a){for(var b=[],c=0;a.length>c;c++)b.push(a[c]);return b}var i=[];return{bind:e,create:b,stopAll:f}}),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+100*(c/d),g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;k.length>d;d++)if(c=k[d]+b,void 0!==e[c])return c;return void 0!==e[b]?b:void 0}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;arguments.length>b;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;d.lines>=i;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;d.lines>=i;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&e.childNodes.length>b+d&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex});if(d.radius+d.length+d.width,e(f,{left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;d.lines>a;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;f.lines>k;k++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){a.childNodes.length>b&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),function(){"use strict";angular.module("pairadiceApp").filter("ordinal",function(){return function(a){var b,c;return null!=a&&parseFloat(a)===parseInt(a)?(b=["th","st","nd","rd"],c=a%100,a+(b[(c-20)%10]||b[c]||b[0])):a}})}.call(this);